\chapter[SID]{SID}
--------------------- FALAR SOBRE O SID

\section{Visão Geral}
O SID está estruturado em duas possíveis vertentes, o WEB e o \textit{mobile}, ele foi desenvolvido com o objetivo de oferecer uma aplicação de divulgação que possua integração com as redes sociais mais agil, intuitiva, dinâmica e amigável para o administrador e para o usuário do sistema, com melhor efetividade no processo de disseminação das informações referentes ao Campus. Atendendo ao objetivo principal, onde é divulgação de informações através de uma plataforma WEB e \textit{mobile}.

Necessitando sempre do uso da rede para realizar atualizações, o SID está dividido em três módulos, o primeiro deles é o administrador, onde é possível fazer o gerenciamento completo do conteúdo que será apresentado no segundo modulo, nesse segundo módulo será apresentado as informações que foram cadastradas no módulo
administrador e serão propagadas por monitores ou celulares. O terceiro módulo é o \textit{mobile}, onde o usuário poderá ter acesso a todas as divulgações assim como o WEB, mas com o incremento de troca de mensagens entre professores e alunos. 

A divisão de módulos foi feita para que seja possível atender a arquitetura cliente-servidor, ela mostrou-se necessário para minimizar o processamento do cliente, centralizando o processamento das informações em um sistema mais robusto, ficando a cargo do cliente somente exibir as informações recebidas.

Escrito na linguagem PHP, para estruturação do projeto e a linguagem JavaScript para realização das requisições de trocas de informações entre os módulos. Usa-se também o Banco de dados PostGreSQL, para armazenamento das informações localmente e que os dados sejam persistentes.

Baseado em desenvolvimento ágil, com metodologia SCRUM, foram definidos sprints semanais para definição das funcionalidades a serem desenvolvidas ou melhoradas. Essa metodologia se torna importante para que o progresso seja acompanhado em cada parte do seu desenvolvimento.

No desenvolvimento, foram usados alguns \textit{framework}, O primeiro deles, usado em conjunto com o PHP, foi o ZEND que tem a finalidade de estruturar o código em modelo, visão e controle. Outro \textit{framework} foi o Doctrine, usado para efetivação da comunicação entre o banco de dados e a orientação a objeto. Foi usado também o Framework7 (F7), em conjunto com o cordova, para que fosse possivel o desenvolvimento do modulo mobile.  

\section{Modulo Administrador}
Com o uso da estrutura cliente-servidor, esse modulo é responsável por conceder ao usuário administrador a funcionalidade de gerenciar todas as informações do sistema podendo inserir, alterar, e retirar as divulgações, ou seja, fazer todo o gerenciamento das informações que são repassadas ao módulo cliente e \textit{mobile}.

--------------- FALAR SOBRE O MODULO

\begin{enumerate}
   \item Legenda: É um campo de texto destinado a informação a ser repassada de forma sucinta e clara ao usuário final por intermédio cliente ou mobile. 
   \item Texto: É todo o texto que será enviado ao Facebook, contendo informações como descrição da publicação, data e horário da realização e um possível \textit{link} para acesso a mais informações. 
   \item Data de Início: É a data inicial em que o publicação começará a ser exibida no cliente e no mobile.
   \item Data de Término: É a data final em que o publicação deixará de ser exibida no cliente e no mobile.
   \item Imagem: Será a imagem enviada para o Facebook, para o cliente e para o mobile. Essa imagem pode ser um \textit{banner} de apresentação de um evento, por exemplo.
 \end{enumerate}

A Figura \ref{fig:administrador1}, consiste em representar como os elementos supracitados são inseridos a partir da visão do operador do sistema no módulo administrador. O diagrama de sequência para esta funcionalidade encontra-se na
 
 --------- COLOCAR O DIAGRAMA -----------

 
 \begin{figure}[H]
\centering
\includegraphics[scale=0.6]{figuras/administrador1}
\caption{Página de inserção no módulo administrador.}
\label{fig:administrador1}
\end{figure}

O campo imagem é repassado para a rede social como \textit{source}, já o campo texto da publicação é repassado como (\textit{messagem}). Essa troca de nomes é feito pois a API requisita exatamente esses parâmetros.

Todos os campos tem preenchimento obrigatório, entretanto, somente o campo imagem e o campo texto da publicação são enviados ao Facebook. Os outros campos não são enviados a rede social, ficam armazenados apenas no banco de dados.

Caso durante o envio alguma das transações não sejam efetivadas, será retornado a mensagem de erro, assim como a mensagem de sucesso, caso não ocorra nenhum erro.

\section{Modulo Cliente}
que, por sua vez, de forma simples, o modulo cliente tem apenas o trabalho de apresentar as divulgações de maneira atrativa e dinâmica para o usuário, enquanto o \textit{mobile} é responsável por apresenta as divulgações e fornece a possibilidade de troca de mensagens entre professores e alunos. 
Figura \ref{fig:cliente1}

-- FALAR SOBRE O MODULO

\begin{figure}[H]
\centering
\includegraphics[scale=0.4]{figuras/cliente1}
\caption{Página do cliente}
\label{fig:cliente1}
\end{figure}


\section{Modulo Mobile}
Figura \ref{fig:mobile1}

\maxwell{FALAR SOBRE O MODULO}
 
\begin{figure}[H]
\centering
\includegraphics[scale=0.6]{figuras/mobile1}
\caption{Página de inserção no módulo administrador.}
\label{fig:mobile1}
\end{figure}


\section{Arquitetura}
\begin{figure}[H]
\centering
\includegraphics[scale=0.6]{figuras/casosDeUso}
\caption{Casos de uso da ações dos módulos administrador e cliente}
\label{fig:casosDeUso}
\end{figure}

\maxwell{COLOCAR DIAGRAMA DE CLASSES}

\maxwell{COLOCAR DIAGRAMA DE SEQUENCIA}

\maxwell{COLOCAR MODELO ENTIDADE RELACIONAMENTO}

\section{Integração}
Para acesso a funções restritas do sistema é necessário que um \textit{login} seja feito. Para isso, é utilizado a ferramenta de \textit{login} do Facebook em conjunto com a Graph. \maxwell{Para funcionamento é requisitado alguns parâmetros obrigatórios, são eles: app\underline{{ }}id, app\underline{{ }}secret, default\underline{{ }}graph\underline{{ }}version e fileUpload.

\begin{itemize}
\item O app\underline{{ }}id e o app\underline{{ }}secret é o id único de cada aplicativo vinculado a rede social, esse id é criado pelo Facebook no momento da criação do que será o seu aplicativo, o app\underline{{ }}id é publico, enquanto o app\underline{{ }}secret é secreto.

\item O parâmetro defalt\underline{{ }}graph\underline{{ }}version irá identificar qual versão da Graph o seu programa irá usar.

\item fileUpload é o parâmetro necessário para informar se será enviado arquivo de imagem ou não.
\end{itemize}}

A rede social oferece um botão para ser colocado na página, esse botão faz com que o processo de login seja iniciado, então é feito a chamada do método ''getRedirectLoginHelper``, para ele é passado as informações de permissões que serão necessárias e o endereço de callback, que será o endereço de retorno caso o processo seja efetivado. O endereço de callback deve ser o mesmo informado no aplicativo criado na página da rede social.

Após o login, as informações usadas são guardadas na sessão do usuário, para usos posteriores, além disso, todo o processo deve ser transparente ao usuário. 

Qualquer divulgação inserida na pagina do SID no Facebook utiliza-se do nó “photo”, ou seja, a divulgação que o SID repassa à Graph API contém a mesma estrutura de uma imagem postada por um usuário convencional desta rede social. 

A Figura \ref{fig:imgfacebook1} apresenta como ficará uma publicação no Facebook após o uso do SID para criação da mesma. Nela é apresentado quem fez a publicação, o texto e a imagem que foi informado durante a criação, com uso do SID.

\begin{figure}[H]
\centering
\includegraphics[scale=1]{figuras/imgfacebook1}
\caption{Divulgação enviada ao Facebook com auxilio do SID}
\label{fig:imgfacebook1}
\end{figure}

O envio das informações para o Facebook é feita estritamente ao nó ''photo``, com o uso do método \textit{post} em conjunto com a Graph, a rede social recebe os parâmetros e faz a criação de um novo objeto, criando uma nova aresta vinculado a página, onde o retorno da requisição é o id desse novo objeto criado. Os parâmetros obrigatórios para criação do novo objeto são os mesmos do usados no login, com adição do: id\underline{{ }}pagina e do token. 

\begin{itemize}
\item O \textit{token} é um conjunto de caracteres que identifica para o Facebook as autorizações que a aplicativo possui.

\item O id\underline{{ }}pagina é o identificador único da sua página ou perfil.
\end{itemize}

É possível também solicitar dados referentes a postagens efetivadas. Para isso é necessário a passagem de alguns parâmetros no método ''get`` e a Graph. Assim como no ''post``, o ''get`` usa todos os parâmetros com exceção do id\underline{{ }}pagina, onde será informado o id\underline{{ }}publicação em substituição do da página.

Com essa requisição é possível recuperar diversas informações referentes a publicação, informações como \textit{url}, comentários, \textit{likes}, data, hora, foto de perfil e nome do usuário que realizou o comentário. O retorno da requisição, se feita com sucesso, retornará as informações solicitadas.
 

\section{Possível solução para Implementação - Rapberry}
Desde a sua invenção em 1971, microprocessadores vem sendo usados no desenvolvimento dos mais variados tipos de eletrônicos ou outros equipamentos, substituindo até mesmo sistemas mecânicos. Algo que vai além de um simples software, os microprocessadores devem ser capazes controlar as ações de um dispositivo. \cite{rosenstark2007}

Para \cite{aristotelous2016}, o objetivo essencial de todos os tipos de empresa é a rentabilidade, podendo ela ser alcançada usando uma solução de baixo custo, boas tecnologias e com um preço atrativo. Teste do \cite{aristotelous2016} apresenta a possibilidade de se ter um servidor completamente funcional com sistema operacional Linux por um equipamento de 35\$, possibilitando a criação de um servidor, por exemplo de um repositório na nuvem com um baixo custo, flexibilidade e eficiência energética. 

Grandes servidores oferecem um melhor desempenho, entretanto, o baixo uso, a pouca eficiência energética ou até mesmo o pouco espaço podem limitar o uso desse tipo de equipamento. Nesse sentido, para \cite{cusick2014}, placas de circuito oferecem vantagens como o uso de pouco espaço, desempenho significante com baixo custo e consumo, além do suporte a diversas soluções de software oferecendo múltiplas opções de interface com uma variante do Linux. 

\section{Visão Geral}

\maxwell{O Facebook oferece diversos produtos para incorporar ao aplicativo externo, entre eles está o de login do Facebook. Esse produto oferece ao desenvolvedor a possibilidade de oferece ao usuário do aplicativo uma ferramenta de login usando as credenciais do Facebook.

A autenticação (\textit{login}) no módulo administrador é feita usando a ferramente de login oferecida pela rode social, então para acesso é necessário um usuário cadastrado no Facebook e cadastrado no no banco de dados do SID. O uso de um usuário vinculado a rede social se torna necessário pois existe a necessidade da página apresentar qual o perfil está realizando a ação, além da necessidade de moderação dos comentários que serão exibidos. 

Para autenticação e efetivação de todas as requisições feitas pelo aplicativo para o Facebook, seja ela para requisitar informações das publicações ou realizar uma nova publicação, é usando um \textit{token} de acesso, que é obtido após a efetivação de login do usuário com o Facebook. O \textit{token} é uma cadeia de caracteres que identifica um usuário, aplicativo ou página, identificando a sessão. Em cada nova requisição a rede social, o \textit{token} será usado, se autorizado, pela aplicação para permitir o envio de requisições HTTP usando seus identificadores únicos, recebendo a respectiva resposta.}

\section{Elementos Usados}
Para publicação no perfil pessoal, a Graph API requisita duas permissões, sendo a “email”, onde é requisitado o acesso ao endereço de email do usuário para que seja possível a autenticação do SID com o Facebook e a “publish\underline{{ }}actions”, onde fornece acesso a realização de publicações em nome da pessoa que está usando o aplicativo \cite{facebook2018a}.

Como o SID será usado em uma página e não em um perfil pessoal, duas novas autenticações se tornaram necessárias, sendo a “manage\underline{{ }}pages”, usada para recuperar as permissões de acesso a pagina e a “publish\underline{{ }}pages”, usada parar permitir que aplicativos publiquem na página \cite{facebook2018a}.

Usando o identificador único da foto é possível recuperar informações das arestas, que são informações como a URL, comentários e curtidas. Esse recurso é utilizado para recuperar o endereço da publicação, os comentários e curtidas que serão apresentados respectivamente nos campos destinados ao QRCode e na coluna de comentários do módulo cliente.

Na criação de uma nova publicação, usando o SID, são passados para a Graph API dois parâmetros para inserção, o primeiro deles é “message”, onde será passado o texto que será exibido na publicação e o outro é “source”, onde será passado a imagem para ser exibida juntamente com o texto. Para envio de imagem para a rede social, é necessário passar na imagem como parâmetro o método “fileToUpload”. 

Alguns dos elementos que são solicitados pela aplicação na criação de uma nova publicação, são omitidos no envio para o Facebook, pois esses dados serão usados apenas para serem armazenados no banco. Os elementos omitidos são os campos data de inicio, a data de termino e a legenda. 

------------------ CONTINUA  P48-------------------